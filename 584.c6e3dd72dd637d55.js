"use strict";(self.webpackChunkadventure_web=self.webpackChunkadventure_web||[]).push([[584],{9584:(Y,g,o)=>{o.r(g),o.d(g,{RoadmapModule:()=>M});var f=o(6814),r=o(95),A=o(3988),b=o(9653),Z=o(6208),l=o(3989),u=o(5861);class S{constructor(O={}){Object.assign(this,O)}}var e=o(4769),R=o(3354),x=o(385),F=o(9209);let C=(()=>{class t extends F.s{constructor(){super(...arguments),this.roadmapUrl="roadmaps"}createRoadmap(i){return this.post(this.roadmapUrl,i)}getAllRoadmapTravels(){return this.get(this.roadmapUrl)}static#e=this.\u0275fac=function(){let i;return function(s){return(i||(i=e.n5z(t)))(s||t)}}();static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var P=o(9483),D=o(4633),y=o(2490);const N=function(t){return{"invalid-input":t}};let I=(()=>{class t{constructor(i,a,s,d,v){var n=this;this.messageService=i,this.destinationService=a,this.roadmapService=s,this.router=d,this.authService=v,this.createRoadmapForm=()=>{this.roadmapCreateForm=new r.cw({roadmapName:new r.NI("",[r.kI.required]),roadmapDestination:new r.NI("",[r.kI.required]),roadmapAmtPerson:new r.NI("",[r.kI.required,r.kI.min(1)]),roadmapPrice:new r.NI({value:"",disabled:!0},[r.kI.required])})},this.createRoadmapRequest=(0,u.Z)(function*(){let m;return yield n.calculatePrice().then(c=>{m=c}),new S({roadmapName:n.roadmapCreateForm.get("roadmapName")?.value,roadmapDestination:n.roadmapCreateForm.get("roadmapDestination")?.value,roadmapAmtPerson:n.roadmapCreateForm.get("roadmapAmtPerson")?.value,roadmapPrice:m,userId:n.authService.getToken()})}),this.findAllDestinations=()=>{this.destinationService.getAllDestinations().subscribe({next:m=>{this.destinations=m.map(c=>c.nomeDestino)},error:m=>{this.messageService.sendError(m)}})},this.onSave=(0,u.Z)(function*(){n.roadmapCreateForm.valid&&(n.roadmapRequest=yield n.createRoadmapRequest(),console.log(n.roadmapRequest),n.roadmapService.createRoadmap(n.roadmapRequest).subscribe({next:()=>{n.messageService.sendSucess("Registro criado com Sucesso!"),n.redirectToRoadmapTravelPage()},error:m=>{n.messageService.sendError(m)}}))}),this.calculatePrice=(0,u.Z)(function*(){const m=n.roadmapCreateForm.get("roadmapDestination")?.value;return new Promise(c=>{n.destinationService.getAllDestinations().subscribe({next:E=>{const T=E.find(h=>h.nomeDestino===m);if(T){const h=n.roadmapCreateForm.get("roadmapAmtPerson")?.value;c(T.precoDestino*(1+(h-1)/4))}}})})}),this.redirectToRoadmapTravelPage=()=>{this.router.navigate(["roadmaps/travels"])},this.createRoadmapForm()}ngOnInit(){this.findAllDestinations()}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(R.S),e.Y36(x.a),e.Y36(C),e.Y36(l.F0),e.Y36(P.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-roadmap-create"]],decls:26,vars:7,consts:[[1,"container"],[3,"formGroup"],[1,"field","grid","mb-30"],["for","roadmapName",1,"col-fixed"],[1,"col"],["id","roadmapName","type","text","formControlName","roadmapName"],["for","roadmapDestination",1,"col-fixed"],["formControlName","roadmapDestination",3,"options"],["for","roadmapAmtPerson",1,"col-fixed"],["id","roadmapAmtPerson","type","number","formControlName","roadmapAmtPerson",3,"ngClass"],[1,"red-text",3,"hidden"],["for","roadmapPrice",1,"col-fixed"],["id","roadmapPrice","formControlName","roadmapPrice",1,"input-number",3,"minFractionDigits"],[1,"field","grid"],["label","Salvar",1,"mt-30",3,"click"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"app-card-form",1)(2,"div",2)(3,"label",3),e._uU(4,"Nome do Roteiro"),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",2)(8,"label",6),e._uU(9,"Destino"),e.qZA(),e.TgZ(10,"div",4),e._UZ(11,"p-dropdown",7),e.qZA()(),e.TgZ(12,"div",2)(13,"label",8),e._uU(14,"Quantidade de Pessoas"),e.qZA(),e.TgZ(15,"div",4),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",10),e._uU(18," Valor inv\xe1lido. "),e.qZA()(),e.TgZ(19,"div",2)(20,"label",11),e._uU(21,"Pre\xe7o"),e.qZA(),e.TgZ(22,"div",4),e._UZ(23,"p-inputNumber",12),e.qZA()(),e.TgZ(24,"div",13)(25,"app-button",14),e.NdJ("click",function(){return s.onSave()}),e.qZA()()()()),2&a&&(e.xp6(1),e.Q6J("formGroup",s.roadmapCreateForm),e.xp6(10),e.Q6J("options",s.destinations),e.xp6(5),e.Q6J("ngClass",e.VKq(5,N,null==s.roadmapCreateForm.controls.roadmapAmtPerson.errors?null:s.roadmapCreateForm.controls.roadmapAmtPerson.errors.min)),e.xp6(1),e.Q6J("hidden",!(null!=s.roadmapCreateForm.controls.roadmapAmtPerson.errors&&s.roadmapCreateForm.controls.roadmapAmtPerson.errors.min)),e.xp6(6),e.Q6J("minFractionDigits",2))},dependencies:[f.mk,A.Lt,b.Rn,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,D.J,y.r],styles:[".container[_ngcontent-%COMP%]{border-bottom-style:solid;margin-bottom:40px;border-bottom-width:0px;margin-top:40px}.input-number[_ngcontent-%COMP%]{background-color:transparent;border:none;border-bottom-width:medium;border-bottom-style:none;border-bottom-color:currentcolor;border-bottom:1px solid #9e9e9e;border-radius:0;outline:none;height:3rem;width:100%;font-size:16px;margin:0 0 8px;padding:0;box-shadow:none;box-sizing:content-box;transition:box-shadow .3s,border .3s}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.mb-30[_ngcontent-%COMP%]{margin-bottom:30px}"]})}return t})();var p=o(988),U=o(9711);const J=[{path:"",component:I},{path:"travels",component:(()=>{class t{constructor(i,a,s){this.messageService=i,this.roadmapService=a,this.authService=s,this.createTableColumns=()=>{this.cols=[new p.o({header:"Nome do Roteiro",field:"roadmapName"}),new p.o({header:"Destino",field:"roadmapDestination"}),new p.o({header:"Qtd. Pessoas",field:"roadmapAmtPerson"}),new p.o({header:"Pre\xe7o",field:"roadmapPrice",currency:!0})]},this.findAllRoadmaps=()=>{this.roadmapService.getAllRoadmapTravels().subscribe({next:d=>{this.roadmapTravels=d.filter(v=>v.userId==this.authService.getToken())},error:d=>{this.messageService.sendError(d)}})},this.createTableColumns()}ngOnInit(){this.findAllRoadmaps()}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(R.S),e.Y36(C),e.Y36(P.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-roadmap-travel-list"]],decls:2,vars:2,consts:[[1,"container"],[3,"cols","values"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"app-table",1),e.qZA()),2&a&&(e.xp6(1),e.Q6J("cols",s.cols)("values",s.roadmapTravels))},dependencies:[U.a],styles:[".container[_ngcontent-%COMP%]{border-bottom-style:solid;margin-bottom:40px;border-bottom-width:0px;margin-top:40px}"]})}return t})()}];let w=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(J),l.Bz]})}return t})(),M=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[f.ez,A.kW,b.L$,r.UX,Z.m,w]})}return t})()}}]);